
@inherits LayoutComponentBase
@implements IDisposable
@inject IUiStatus Ui

<div class="d-flex flex-column min-vh-100">
  <nav class="navbar navbar-expand bg-body-tertiary border-bottom">
    <div class="container">
      <NavLink class="navbar-brand" href="" Match="NavLinkMatch.All">SYSS8.OPF.Clean</NavLink>
      <div class="navbar-nav">
        <NavLink class="nav-link" href="/library">Library</NavLink>
      </div>
    </div>
  </nav>

  <main class="flex-grow-1 py-4">
    <div class="container">
      @if (Ui.Error is not null)
      {
        <Alert Severity="danger" Title="@Ui.Error.Title" Message="@Ui.Error.Detail"
               Dismissable="true" Role="alert" AriaLive="assertive"
               OnDismiss="@(()=>Ui.SetError(null))" />
      }
      <div class="content-card bg-body p-4">
        @Body
      </div>
    </div>
  </main>

  <footer class="border-top py-3">
    <div class="container text-body-secondary small">© OPF Clean — Classroom Build</div>
  </footer>
</div>

<BusyOverlay />

@code{
  protected override void OnInitialized() => Ui.Changed += OnUiChanged;
  void OnUiChanged() => InvokeAsync(StateHasChanged);
  public void Dispose() => Ui.Changed -= OnUiChanged;
}
